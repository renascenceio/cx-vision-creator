<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CX Vision Creator â€” xGravity Â· Renascence</title>
<meta name="description" content="Design a CX Vision that moves people. A free tool by Renascence â€” the experience design consultancy.">
<meta property="og:title" content="CX Vision Creator by Renascence">
<meta property="og:description" content="Build a behaviorally-grounded CX Vision in four steps. Free tool by Renascence.">
<meta property="og:image" content="https://renascence.io/og-vision.png">
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --blue:    #002AFF;
    --magenta: #E8006F;
    --pink:    #FF0099;
    --grad: linear-gradient(135deg, #002AFF 0%, #8800cc 45%, #E8006F 78%, #FF0099 100%);
    --page:  #ededed;
    --card:  #ffffff;
    --card2: #f4f4f4;
    --ink:       #111110;
    --ink-dim:   rgba(17,17,16,0.55);
    --ink-muted: rgba(17,17,16,0.35);
    --border:  rgba(17,17,16,0.10);
    --border2: rgba(17,17,16,0.06);
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Roboto', sans-serif;
    background: var(--page);
    color: var(--ink);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
  }

  /* â”€â”€ HERO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .hero {
    position: relative; padding: 64px 48px 52px;
    overflow: hidden; background: var(--page);
    border-bottom: 1px solid var(--border);
  }
  .hero-accent { position: absolute; top:0;left:0;right:0; height:3px; background:var(--grad); }
  .hero-glow-r {
    position:absolute; right:-100px; top:-80px; width:440px; height:440px;
    background:radial-gradient(circle,rgba(232,0,111,0.08) 0%,transparent 70%); pointer-events:none;
  }
  .hero-glow-l {
    position:absolute; left:-60px; bottom:-60px; width:320px; height:320px;
    background:radial-gradient(circle,rgba(0,42,255,0.07) 0%,transparent 70%); pointer-events:none;
  }
  .hero-inner { position:relative; z-index:1; display:flex; justify-content:space-between; align-items:flex-end; gap:40px; }
  .hero-text { flex:1; }
  .hero-eyebrow {
    font-family:'Roboto Mono',monospace; font-size:10.5px; letter-spacing:0.20em;
    text-transform:uppercase; font-weight:500;
    background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    background-clip:text; margin-bottom:18px; display:inline-block;
  }
  .hero h1 {
    font-size:clamp(32px,4.5vw,54px); font-weight:900; line-height:1.06;
    color:var(--ink); max-width:560px; margin-bottom:16px; letter-spacing:-0.02em;
  }
  .hero h1 em { font-style:italic; font-weight:300; }
  .hero-sub { font-size:15px; font-weight:300; line-height:1.65; color:var(--ink-dim); max-width:520px; }
  .hero-badge {
    flex-shrink:0; text-align:center;
    background:var(--card); border:1.5px solid var(--border);
    border-radius:12px; padding:20px 24px;
  }
  .hero-badge-logo {
    font-family:'Roboto Mono',monospace; font-size:11px; letter-spacing:0.18em;
    text-transform:uppercase; color:var(--ink-muted); margin-bottom:8px;
  }
  .hero-badge-tag {
    font-size:11px; font-weight:500;
    background:rgba(232,0,111,0.08); color:var(--magenta);
    padding:3px 10px; border-radius:100px; display:inline-block;
  }

  /* â”€â”€ MAIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .main { max-width:1160px; margin:0 auto; padding:40px 48px 100px; }

  /* â”€â”€ STEPS BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .steps-bar {
    display:flex; align-items:center;
    margin-bottom:36px; background:var(--card);
    border:1.5px solid var(--border); border-radius:10px; overflow:hidden;
  }
  .step-item {
    flex:1; padding:14px 18px; display:flex; align-items:center; gap:10px;
    border-right:1.5px solid var(--border); transition:background 0.18s;
  }
  .step-item:last-child { border-right:none; }
  .step-item.active { background:var(--card2); }
  .step-item.done .step-num { background:var(--grad); color:white; border-color:transparent; }
  .step-num {
    width:26px; height:26px; border-radius:50%;
    border:1.5px solid var(--border); display:flex; align-items:center; justify-content:center;
    font-family:'Roboto Mono',monospace; font-size:11px; font-weight:500;
    color:var(--ink-muted); flex-shrink:0; transition:all 0.2s;
  }
  .step-item.active .step-num { background:var(--grad); color:white; border-color:transparent; }
  .step-label { font-size:12px; font-weight:500; color:var(--ink-muted); line-height:1.3; }
  .step-item.active .step-label { color:var(--ink); }

  /* â”€â”€ PROGRESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .progress-wrap { height:3px; background:var(--border); border-radius:100px; margin-bottom:36px; overflow:hidden; }
  .progress-fill { height:100%; background:var(--grad); border-radius:100px; transition:width 0.4s cubic-bezier(0.4,0,0.2,1); }

  /* â”€â”€ FORM SECTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .form-section { display:none; }
  .form-section.active { display:block; }
  .section-title { font-size:22px; font-weight:700; color:var(--ink); letter-spacing:-0.02em; margin-bottom:6px; }
  .section-sub { font-size:14px; font-weight:300; color:var(--ink-dim); margin-bottom:28px; line-height:1.6; }

  /* â”€â”€ OPTION GRIDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .option-grid { display:grid; gap:12px; }
  .option-grid.cols-4 { grid-template-columns:repeat(4,1fr); }
  .option-grid.cols-2 { grid-template-columns:repeat(2,1fr); }
  .option-card {
    background:var(--card); border:1.5px solid var(--border); border-radius:10px;
    padding:18px 20px; cursor:pointer; transition:all 0.18s;
    display:flex; flex-direction:column; gap:6px;
    box-shadow:0 1px 3px rgba(0,0,0,0.04); user-select:none;
  }
  .option-card:hover { border-color:rgba(232,0,111,0.35); box-shadow:0 4px 14px rgba(232,0,111,0.08); transform:translateY(-1px); }
  .option-card.selected { border-color:var(--magenta); background:rgba(232,0,111,0.04); box-shadow:0 4px 14px rgba(232,0,111,0.12); }
  .option-card.selected .option-label { background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
  .option-card > * { pointer-events:none; }
  .option-icon { font-size:22px; margin-bottom:2px; }
  .option-label { font-size:14px; font-weight:700; color:var(--ink); letter-spacing:-0.01em; }
  .option-desc { font-size:12px; color:var(--ink-muted); line-height:1.5; font-weight:300; }

  /* â”€â”€ TONE GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tone-row { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
  .tone-card {
    background:var(--card); border:1.5px solid var(--border); border-radius:10px;
    padding:16px 18px; cursor:pointer; transition:all 0.18s; text-align:center;
  }
  .tone-card:hover { border-color:rgba(0,42,255,0.35); transform:translateY(-1px); }
  .tone-card.selected { border-color:var(--blue); background:rgba(0,42,255,0.04); }
  .tone-card.selected .tone-label { color:var(--blue); font-weight:700; }
  .tone-emoji { font-size:26px; display:block; margin-bottom:8px; }
  .tone-label { font-size:13px; font-weight:600; color:var(--ink); display:block; margin-bottom:4px; }
  .tone-desc { font-size:11px; color:var(--ink-muted); line-height:1.45; }

  /* â”€â”€ ADJECTIVE POOL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .adj-info {
    font-family:'Roboto Mono',monospace; font-size:10px; letter-spacing:0.12em;
    text-transform:uppercase; color:var(--ink-muted); margin-bottom:12px;
  }
  .adj-info span { background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; font-weight:700; }
  .adj-cat-tabs { display:flex; gap:8px; margin-bottom:16px; flex-wrap:wrap; }
  .adj-cat-tab {
    padding:5px 14px; border-radius:100px; font-size:12px; font-weight:500;
    border:1.5px solid var(--border); background:var(--card); color:var(--ink-muted); cursor:pointer; transition:all 0.15s;
  }
  .adj-cat-tab.active { background:var(--ink); color:white; border-color:var(--ink); }
  .adj-pool { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:20px; }
  .adj-tag {
    padding:6px 14px; background:var(--card); border:1.5px solid var(--border);
    border-radius:100px; font-size:13px; font-weight:400; color:var(--ink-dim);
    cursor:pointer; transition:all 0.15s; user-select:none;
  }
  .adj-tag:hover { border-color:rgba(232,0,111,0.35); color:var(--ink); }
  .adj-tag.selected { background:var(--grad); color:white; border-color:transparent; font-weight:500; }
  .adj-tag.disabled { opacity:0.35; cursor:not-allowed; pointer-events:none; }

  /* â”€â”€ FORM INPUTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .form-group { margin-bottom:20px; }
  .form-label {
    font-family:'Roboto Mono',monospace; font-size:10px; letter-spacing:0.14em;
    text-transform:uppercase; color:var(--ink-muted); margin-bottom:8px; display:block;
  }
  .form-input, .form-textarea {
    width:100%; border:1.5px solid var(--border); background:var(--card);
    border-radius:8px; padding:12px 16px; font-family:'Roboto',sans-serif;
    font-size:14px; color:var(--ink); outline:none; transition:border-color 0.18s, box-shadow 0.18s;
  }
  .form-input:focus, .form-textarea:focus { border-color:var(--magenta); box-shadow:0 0 0 3px rgba(232,0,111,0.10); }
  .form-textarea { resize:vertical; min-height:100px; line-height:1.6; }
  .form-input::placeholder, .form-textarea::placeholder { color:var(--ink-muted); }
  .select-wrap { position:relative; }
  .select-wrap::after { content:'â†“'; position:absolute; right:14px; top:50%; transform:translateY(-50%); pointer-events:none; font-size:12px; color:var(--ink-dim); }
  .select-wrap select {
    width:100%; height:46px; border:1.5px solid var(--border); background:var(--card);
    border-radius:8px; padding:0 40px 0 16px; font-family:'Roboto',sans-serif;
    font-size:14px; color:var(--ink); outline:none; transition:border-color 0.18s;
    -webkit-appearance:none; appearance:none; cursor:pointer;
  }
  .select-wrap select:focus { border-color:var(--magenta); box-shadow:0 0 0 3px rgba(232,0,111,0.10); }
  .hint { font-size:12px; color:var(--ink-muted); margin-top:6px; font-style:italic; line-height:1.5; }

  /* â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .btn {
    height:46px; border-radius:8px; font-family:'Roboto',sans-serif;
    font-size:14px; font-weight:500; cursor:pointer; border:none;
    transition:all 0.18s; display:inline-flex; align-items:center; gap:8px; padding:0 24px;
  }
  .btn-primary { background:var(--grad); color:white; box-shadow:0 4px 14px rgba(232,0,111,0.25); }
  .btn-primary:hover { box-shadow:0 6px 20px rgba(232,0,111,0.35); transform:translateY(-1px); }
  .btn-primary:disabled { opacity:0.45; cursor:not-allowed; transform:none; box-shadow:none; }
  .btn-ghost { background:transparent; color:var(--ink-dim); border:1.5px solid var(--border); }
  .btn-ghost:hover { border-color:var(--ink); color:var(--ink); }
  .btn-blue { background:var(--blue); color:white; }
  .btn-blue:hover { opacity:0.88; transform:translateY(-1px); }
  .btn-outline { background:transparent; color:var(--blue); border:1.5px solid var(--blue); }
  .btn-outline:hover { background:var(--blue); color:white; }

  .form-nav { display:flex; align-items:center; justify-content:space-between; margin-top:36px; padding-top:24px; border-top:1px solid var(--border); }
  .error-msg { background:rgba(232,0,111,0.06); border:1.5px solid rgba(232,0,111,0.20); border-radius:10px; padding:14px 18px; color:#a50050; font-size:13px; margin-top:16px; display:none; line-height:1.6; }
  .error-msg.visible { display:block; }

  /* â”€â”€ EMAIL GATE MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .modal-overlay {
    display:none; position:fixed; inset:0;
    background:rgba(17,17,16,0.55); backdrop-filter:blur(6px);
    z-index:200; align-items:center; justify-content:center;
  }
  .modal-overlay.visible { display:flex; }
  .modal {
    background:var(--card); border-radius:16px; padding:40px 44px;
    max-width:480px; width:90%; box-shadow:0 24px 80px rgba(0,0,0,0.18);
    position:relative; animation:modalIn 0.28s cubic-bezier(0.4,0,0.2,1);
  }
  @keyframes modalIn { from { opacity:0; transform:translateY(16px) scale(0.97); } to { opacity:1; transform:none; } }
  .modal-close {
    position:absolute; top:16px; right:16px; width:28px; height:28px;
    border-radius:50%; border:1.5px solid var(--border); background:transparent;
    cursor:pointer; display:flex; align-items:center; justify-content:center;
    font-size:14px; color:var(--ink-muted); transition:all 0.15s;
  }
  .modal-close:hover { border-color:var(--ink); color:var(--ink); }
  .modal-icon { font-size:36px; margin-bottom:16px; }
  .modal h3 { font-size:20px; font-weight:700; letter-spacing:-0.02em; margin-bottom:8px; }
  .modal p { font-size:14px; color:var(--ink-dim); line-height:1.6; margin-bottom:24px; font-weight:300; }
  .modal-input {
    width:100%; border:1.5px solid var(--border); background:var(--card2);
    border-radius:8px; padding:12px 16px; font-family:'Roboto',sans-serif;
    font-size:14px; color:var(--ink); outline:none; margin-bottom:14px;
    transition:border-color 0.18s;
  }
  .modal-input:focus { border-color:var(--magenta); box-shadow:0 0 0 3px rgba(232,0,111,0.10); }
  .modal-input::placeholder { color:var(--ink-muted); }
  .modal-privacy { font-size:11px; color:var(--ink-muted); line-height:1.5; margin-top:10px; }
  .modal-privacy a { color:var(--blue); text-decoration:none; }

  /* â”€â”€ GENERATING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .gen-overlay {
    display:none; position:fixed; inset:0;
    background:rgba(237,237,237,0.88); backdrop-filter:blur(8px);
    z-index:100; flex-direction:column; align-items:center; justify-content:center; gap:24px;
  }
  .gen-overlay.visible { display:flex; }
  .gen-spinner {
    width:56px; height:56px; border-radius:50%;
    border:3px solid var(--border); border-top-color:var(--magenta);
    animation:spin 0.9s linear infinite;
  }
  @keyframes spin { to { transform:rotate(360deg); } }
  .gen-messages { font-size:15px; font-weight:300; color:var(--ink-dim); text-align:center; line-height:1.7; }
  .gen-messages strong { font-weight:700; color:var(--ink); display:block; margin-bottom:4px; font-size:17px; }
  .gen-step { opacity:0; transition:opacity 0.5s; }
  .gen-step.visible { opacity:1; }

  /* â”€â”€ OUTPUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .output-section { display:none; }
  .output-section.visible { display:block; }

  .regen-bar {
    background:rgba(0,42,255,0.04); border:1.5px solid rgba(0,42,255,0.14);
    border-radius:10px; padding:16px 20px;
    display:flex; align-items:center; justify-content:space-between; gap:16px;
    margin-bottom:28px; flex-wrap:wrap;
  }
  .regen-bar-text { font-size:13px; color:var(--ink-dim); line-height:1.5; }
  .regen-bar-text strong { color:var(--ink); }
  .regen-bar-actions { display:flex; gap:10px; flex-shrink:0; }

  /* Vision statement */
  .vision-block {
    background:var(--card); border:1.5px solid var(--border); border-radius:14px;
    padding:40px 48px; margin-bottom:24px; position:relative; overflow:hidden;
  }
  .vision-block::before { content:''; position:absolute; top:0;left:0;right:0; height:4px; background:var(--grad); }
  .vision-type-badge {
    position:absolute; top:20px; right:20px;
    font-family:'Roboto Mono',monospace; font-size:9px; letter-spacing:0.15em; text-transform:uppercase;
    padding:4px 10px; border-radius:100px; background:var(--card2); border:1px solid var(--border); color:var(--ink-muted);
  }
  .vision-quote { font-size:72px; font-weight:900; line-height:0.7; margin-bottom:20px; display:block; background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; opacity:0.25; }
  .vision-text { font-size:clamp(17px,2.2vw,24px); font-weight:300; line-height:1.65; color:var(--ink); letter-spacing:-0.01em; }
  .vision-kw { font-weight:700; background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }

  /* Pillars */
  .pillars-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-bottom:24px; }
  .pillar-card {
    background:var(--card); border:1.5px solid var(--border); border-radius:12px;
    padding:24px; position:relative; overflow:hidden;
  }
  .pillar-card::before { content:''; position:absolute; top:0;left:0;right:0; height:3px; background:var(--grad); }
  .pillar-kw { font-size:20px; font-weight:900; letter-spacing:-0.02em; margin-bottom:6px; background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
  .pillar-tags { font-family:'Roboto Mono',monospace; font-size:10px; letter-spacing:0.08em; color:var(--ink-muted); margin-bottom:14px; line-height:1.6; }
  .pillar-desc { font-size:13px; color:var(--ink-dim); line-height:1.65; font-weight:300; }

  /* Touchpoints */
  .tp-block { background:var(--card); border:1.5px solid var(--border); border-radius:12px; padding:28px 32px; margin-bottom:24px; }
  .tp-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:0; }
  .tp-col { padding:0 20px 0 0; border-right:1px solid var(--border); }
  .tp-col:last-child { border-right:none; padding-right:0; padding-left:20px; }
  .tp-col:first-child { padding-left:0; }
  .tp-col-title { font-size:11px; font-weight:700; letter-spacing:0.10em; text-transform:uppercase; background:var(--grad); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; margin-bottom:14px; }
  .tp-item { display:flex; align-items:flex-start; gap:10px; margin-bottom:12px; padding-bottom:12px; border-bottom:1px solid var(--border2); }
  .tp-item:last-child { border-bottom:none; margin-bottom:0; padding-bottom:0; }
  .tp-icon { font-size:16px; flex-shrink:0; margin-top:1px; }
  .tp-name { font-size:12px; font-weight:600; color:var(--ink); margin-bottom:2px; }
  .tp-how { font-size:11px; color:var(--ink-muted); line-height:1.5; font-weight:300; }

  /* Scenarios */
  .scenarios-block { background:var(--card); border:1.5px solid var(--border); border-radius:12px; padding:28px 32px; margin-bottom:24px; }
  .scenario-item { display:flex; gap:16px; padding:16px 0; border-bottom:1px solid var(--border2); align-items:flex-start; }
  .scenario-item:last-child { border-bottom:none; padding-bottom:0; }
  .scenario-num { width:32px; height:32px; border-radius:50%; border:1.5px solid var(--border); display:flex; align-items:center; justify-content:center; font-family:'Roboto Mono',monospace; font-size:11px; font-weight:500; color:var(--ink-muted); flex-shrink:0; margin-top:2px; }
  .scenario-content h4 { font-size:14px; font-weight:700; margin-bottom:4px; }
  .scenario-content p { font-size:13px; color:var(--ink-dim); line-height:1.6; font-weight:300; }

  /* Variants */
  .variants-block { background:var(--card); border:1.5px solid var(--border); border-radius:12px; padding:28px 32px; margin-bottom:24px; }
  .variant-row { display:grid; grid-template-columns:160px 1fr; gap:16px; align-items:start; padding:14px 0; border-bottom:1px solid var(--border2); }
  .variant-row:last-child { border-bottom:none; }
  .variant-type { font-family:'Roboto Mono',monospace; font-size:9px; letter-spacing:0.14em; text-transform:uppercase; color:var(--ink-muted); padding:4px 10px; border-radius:100px; background:var(--card2); border:1px solid var(--border); text-align:center; width:fit-content; }
  .variant-text { font-size:13px; color:var(--ink-dim); line-height:1.6; font-weight:300; }
  .variant-text strong { color:var(--ink); font-weight:600; }

  /* Implementation note */
  .impl-block { background:rgba(0,42,255,0.03); border:1.5px solid rgba(0,42,255,0.12); border-radius:12px; padding:28px 32px; margin-bottom:24px; }
  .impl-title { font-size:15px; font-weight:700; color:var(--blue); margin-bottom:8px; }
  .impl-text { font-size:13px; color:var(--ink-dim); line-height:1.7; font-weight:300; }

  /* Download CTA */
  .download-cta {
    background:var(--card); border:1.5px solid var(--border); border-radius:12px;
    padding:28px 32px; margin-bottom:24px;
    display:flex; align-items:center; justify-content:space-between; gap:24px;
    background: linear-gradient(135deg, rgba(0,42,255,0.04), rgba(232,0,111,0.04));
  }
  .download-cta-text h3 { font-size:17px; font-weight:700; letter-spacing:-0.01em; margin-bottom:4px; }
  .download-cta-text p { font-size:13px; color:var(--ink-dim); font-weight:300; }

  /* Block headings */
  .blk-h { font-size:16px; font-weight:700; letter-spacing:-0.01em; margin-bottom:4px; }
  .blk-s { font-size:13px; color:var(--ink-dim); font-weight:300; margin-bottom:18px; }

  /* Footer */
  .footer {
    border-top:1px solid var(--border); padding:24px 48px;
    display:flex; align-items:center; justify-content:space-between; gap:20px;
    background:var(--card);
  }
  .footer-brand { font-family:'Roboto Mono',monospace; font-size:10px; letter-spacing:0.18em; text-transform:uppercase; color:var(--ink-muted); }
  .footer-links { display:flex; gap:20px; }
  .footer-links a { font-size:12px; color:var(--ink-muted); text-decoration:none; }
  .footer-links a:hover { color:var(--ink); }

  /* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width:960px) {
    .hero-inner { flex-direction:column; }
    .hero-badge { display:none; }
    .hero { padding:40px 24px 36px; }
    .main { padding:28px 24px 60px; }
    .option-grid.cols-4 { grid-template-columns:repeat(2,1fr); }
    .option-grid.cols-2 { grid-template-columns:1fr; }
    .tone-row { grid-template-columns:1fr 1fr; }
    .pillars-grid { grid-template-columns:1fr 1fr; }
    .tp-grid { grid-template-columns:1fr; gap:16px; }
    .tp-col { border-right:none; border-bottom:1px solid var(--border); padding:0 0 16px; }
    .tp-col:last-child { border-bottom:none; }
    .vision-block { padding:28px 24px; }
    .steps-bar { display:none; }
    .variant-row { grid-template-columns:1fr; gap:8px; }
    .footer { flex-direction:column; align-items:flex-start; padding:20px 24px; }
  }
</style>
</head>
<body>

<!-- â”€â”€ HERO â”€â”€ -->
<div class="hero">
  <div class="hero-accent"></div>
  <div class="hero-glow-r"></div>
  <div class="hero-glow-l"></div>
  <div class="hero-inner">
    <div class="hero-text">
      <div class="hero-eyebrow">xGravity Â· CX Vision Creator</div>
      <h1>Design a vision<br><em>that moves people.</em></h1>
      <p class="hero-sub">A great CX Vision isn't just a statement â€” it's a gravitational force that aligns people, prioritises decisions, and turns culture into action. Build yours in four steps. Free.</p>
    </div>
    <div class="hero-badge">
      <div class="hero-badge-logo">Renascence</div>
      <div style="font-size:22px;margin:8px 0">âœ¦</div>
      <div class="hero-badge-tag">xGravity Framework</div>
    </div>
  </div>
</div>

<!-- â”€â”€ MAIN â”€â”€ -->
<div class="main">

  <!-- Steps -->
  <div class="steps-bar" id="stepsBar">
    <div class="step-item active" id="st0"><div class="step-num">1</div><div class="step-label">Industry</div></div>
    <div class="step-item" id="st1"><div class="step-num">2</div><div class="step-label">Type &amp; Tone</div></div>
    <div class="step-item" id="st2"><div class="step-num">3</div><div class="step-label">Pillars</div></div>
    <div class="step-item" id="st3"><div class="step-num">4</div><div class="step-label">Context</div></div>
  </div>
  <div class="progress-wrap"><div class="progress-fill" id="progressFill" style="width:25%"></div></div>

  <!-- â”€â”€ STEP 1: INDUSTRY â”€â”€ -->
  <div class="form-section active" id="step0">
    <div class="section-title">What industry are you designing for?</div>
    <div class="section-sub">Your industry shapes the language, touchpoints and ambition of your vision.</div>
    <div class="option-grid cols-4">
      <div class="option-card" data-pick-key="industry" data-pick-val="Real Estate & Property"><div class="option-icon">ğŸ™ï¸</div><div class="option-label">Real Estate</div><div class="option-desc">Property, development, leasing</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Banking & Financial Services"><div class="option-icon">ğŸ¦</div><div class="option-label">Banking & Finance</div><div class="option-desc">Retail banking, wealth, fintech</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Hospitality & Tourism"><div class="option-icon">ğŸ¨</div><div class="option-label">Hospitality</div><div class="option-desc">Hotels, travel, experiences</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Healthcare & Wellness"><div class="option-icon">ğŸ¥</div><div class="option-label">Healthcare</div><div class="option-desc">Hospitals, clinics, wellness</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Luxury Retail & Fashion"><div class="option-icon">ğŸ’</div><div class="option-label">Luxury Retail</div><div class="option-desc">Premium brands, fashion</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Automotive"><div class="option-icon">ğŸš—</div><div class="option-label">Automotive</div><div class="option-desc">Vehicles, mobility, EV</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="E-Commerce & Retail"><div class="option-icon">ğŸ›’</div><div class="option-label">E-Commerce</div><div class="option-desc">Online retail, marketplaces</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Telecom & Technology"><div class="option-icon">ğŸ“¡</div><div class="option-label">Telecom & Tech</div><div class="option-desc">Connectivity, SaaS, devices</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Education & EdTech"><div class="option-icon">ğŸ“</div><div class="option-label">Education</div><div class="option-desc">Schools, universities, edtech</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Insurance"><div class="option-icon">ğŸ›¡ï¸</div><div class="option-label">Insurance</div><div class="option-desc">Life, health, property</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Food, Beverage & Restaurants"><div class="option-icon">ğŸ½ï¸</div><div class="option-label">Food & Beverage</div><div class="option-desc">Restaurants, FMCG, delivery</div></div>
      <div class="option-card" data-pick-key="industry" data-pick-val="Government & Public Services"><div class="option-icon">ğŸ›ï¸</div><div class="option-label">Government</div><div class="option-desc">Public services, civic tech</div></div>
    </div>
    <div class="form-group" style="margin-top:24px">
      <label class="form-label">Brand or organisation name (optional)</label>
      <input class="form-input" id="brandName" placeholder="e.g. Renascence, Aldar, ICTReDâ€¦" />
    </div>
    <div class="error-msg" id="e0">Please select an industry to continue.</div>
    <div class="form-nav"><span></span><button class="btn btn-primary" onclick="next(0)">Next â€” Vision Type â†’</button></div>
  </div>

  <!-- â”€â”€ STEP 2: TYPE & TONE â”€â”€ -->
  <div class="form-section" id="step1">
    <div class="section-title">What type of vision do you want to build?</div>
    <div class="section-sub">Each type creates a different gravitational pull â€” on employees, culture, and customers.</div>
    <div class="option-grid cols-2" style="margin-bottom:32px">
      <div class="option-card" data-pick-key="visionType" data-pick-val="adjective"><div class="option-icon">âœ¦</div><div class="option-label">Adjective-Based</div><div class="option-desc">"We want every experience to be inspiring, inviting, dynamic." Clear, measurable, easy for teams to translate into behaviour.</div></div>
      <div class="option-card" data-pick-key="visionType" data-pick-val="feeling"><div class="option-icon">â™¡</div><div class="option-label">Feeling-Based</div><div class="option-desc">"We want every customer to feel confident, seen, at ease." Emotionally resonant and customer-perspective-first.</div></div>
      <div class="option-card" data-pick-key="visionType" data-pick-val="promise"><div class="option-icon">â—‡</div><div class="option-label">Promise-Based</div><div class="option-desc">"In every interaction, we promise to be honest, responsive, genuinely helpful." Concrete and commitment-forward.</div></div>
      <div class="option-card" data-pick-key="visionType" data-pick-val="principle"><div class="option-icon">â–³</div><div class="option-label">Principle-Based</div><div class="option-desc">"We operate by: craft above convenience, empathy before efficiency." Philosophy-led and distinctive.</div></div>
    </div>
    <div class="section-title" style="font-size:17px;margin-bottom:6px">What tone should it carry?</div>
    <div class="section-sub">Tone shapes how the vision sounds â€” and how it will land.</div>
    <div class="tone-row">
      <div class="tone-card" data-tone="aspirational"><span class="tone-emoji">ğŸŒ…</span><span class="tone-label">Aspirational</span><span class="tone-desc">Dreamy, forward-looking, emotionally elevated.</span></div>
      <div class="tone-card" data-tone="bold"><span class="tone-emoji">âš¡</span><span class="tone-label">Bold & Declarative</span><span class="tone-desc">Confident, assertive, no caveats.</span></div>
      <div class="tone-card" data-tone="human"><span class="tone-emoji">ğŸ¤</span><span class="tone-label">Warm & Human</span><span class="tone-desc">Approachable, empathetic, grounded.</span></div>
      <div class="tone-card" data-tone="precise"><span class="tone-emoji">ğŸ”·</span><span class="tone-label">Precise & Functional</span><span class="tone-desc">Measured, specific, operational.</span></div>
      <div class="tone-card" data-tone="poetic"><span class="tone-emoji">ğŸŒ¿</span><span class="tone-label">Poetic & Evocative</span><span class="tone-desc">Metaphorical, memorable, unexpected.</span></div>
      <div class="tone-card" data-tone="premium"><span class="tone-emoji">â™Ÿ</span><span class="tone-label">Premium & Refined</span><span class="tone-desc">Restrained, dignified, quietly confident.</span></div>
    </div>
    <div class="error-msg" id="e1">Please select both a vision type and a tone.</div>
    <div class="form-nav"><button class="btn btn-ghost" onclick="prev(1)">â† Back</button><button class="btn btn-primary" onclick="next(1)">Next â€” Choose Pillars â†’</button></div>
  </div>

  <!-- â”€â”€ STEP 3: PILLARS â”€â”€ -->
  <div class="form-section" id="step2">
    <div class="section-title">Choose your vision pillars</div>
    <div class="section-sub">Pick 3â€“5 words that become the gravitational centre of your vision. These aren't decoration â€” they're design decisions.</div>
    <div class="adj-info">Selected: <span id="adjCount">0</span> / 5 &nbsp;Â·&nbsp; Choose 3â€“5</div>
    <div class="adj-cat-tabs">
      <div class="adj-cat-tab active" data-adj-cat="all">All</div>
      <div class="adj-cat-tab" data-adj-cat="emotional">Emotional</div>
      <div class="adj-cat-tab" data-adj-cat="operational">Operational</div>
      <div class="adj-cat-tab" data-adj-cat="character">Character</div>
      <div class="adj-cat-tab" data-adj-cat="innovation">Innovation</div>
      <div class="adj-cat-tab" data-adj-cat="experience">Experience</div>
    </div>
    <div class="adj-pool" id="adjPool"></div>
    <div class="error-msg" id="e2">Please select between 3 and 5 pillars.</div>
    <div class="form-nav"><button class="btn btn-ghost" onclick="prev(2)">â† Back</button><button class="btn btn-primary" onclick="next(2)">Next â€” Your Context â†’</button></div>
  </div>

  <!-- â”€â”€ STEP 4: CONTEXT â”€â”€ -->
  <div class="form-section" id="step3">
    <div class="section-title">Tell us about your ambition</div>
    <div class="section-sub">The more real this is, the more alive the vision will be.</div>
    <div class="form-group">
      <label class="form-label">What should customers always feel after every interaction?</label>
      <input class="form-input" id="customerFeeling" placeholder="e.g. Confident they made the right choice. Seen as a person, not a number." />
    </div>
    <div class="form-group">
      <label class="form-label">Any additional context, challenge or direction? (optional)</label>
      <textarea class="form-textarea" id="freeContext" placeholder="e.g. We're moving from product-first to customer-first. Our biggest challenge is consistency across 12 regions..."></textarea>
      <div class="hint">The richer the context, the more precise and useful the output.</div>
    </div>
    <div class="form-group">
      <label class="form-label">How many pillars to feature prominently?</label>
      <div class="select-wrap">
        <select id="pillarCount">
          <option value="3">3 pillars â€” clean and memorable</option>
          <option value="4" selected>4 pillars â€” balanced and complete</option>
          <option value="5">5 pillars â€” comprehensive</option>
        </select>
      </div>
    </div>
    <div class="error-msg" id="e3">Please tell us what customers should feel â€” this anchors the entire vision.</div>
    <div class="form-nav"><button class="btn btn-ghost" onclick="prev(3)">â† Back</button><button class="btn btn-primary" onclick="generate()">âœ¦ Generate My CX Vision</button></div>
  </div>

  <!-- â”€â”€ OUTPUT â”€â”€ -->
  <div class="output-section" id="outputSection">
    <div class="regen-bar">
      <div class="regen-bar-text"><strong>Your CX Vision is ready.</strong> Not quite right? Regenerate with the same inputs or start fresh.</div>
      <div class="regen-bar-actions">
        <button class="btn btn-ghost" onclick="startOver()">Start over</button>
        <button class="btn btn-outline" onclick="regen()">â†º Regenerate</button>
      </div>
    </div>
    <div id="outputContent"></div>
  </div>

</div>

<!-- â”€â”€ FOOTER â”€â”€ -->
<div class="footer">
  <div class="footer-brand">Renascence Â· xGravity Framework Â· Â© 2025</div>
  <div class="footer-links">
    <a href="https://renascence.io" target="_blank">renascence.io</a>
    <a href="https://renascence.io/privacy" target="_blank">Privacy</a>
  </div>
</div>

<!-- â”€â”€ EMAIL GATE MODAL â”€â”€ -->
<div class="modal-overlay" id="emailModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">âœ•</button>
    <div class="modal-icon" id="modalIcon">ğŸ“©</div>
    <h3 id="modalTitle">One more thingâ€¦</h3>
    <p id="modalDesc">Leave your email to continue â€” we'll also send you the vision summary straight to your inbox. No spam, ever.</p>
    <input class="modal-input" type="email" id="modalEmail" placeholder="your@email.com" />
    <div class="error-msg" id="emailError" style="margin-top:0;margin-bottom:10px">Please enter a valid email address.</div>
    <button class="btn btn-primary" style="width:100%;justify-content:center" id="modalCta" onclick="submitEmail()">Continue â†’</button>
    <div class="modal-privacy">By continuing you agree to Renascence's <a href="https://renascence.io/privacy">Privacy Policy</a>. We never sell your data.</div>
  </div>
</div>

<!-- â”€â”€ GENERATING OVERLAY â”€â”€ -->
<div class="gen-overlay" id="genOverlay">
  <div class="gen-spinner"></div>
  <div class="gen-messages">
    <strong>Crafting your visionâ€¦</strong>
    <div class="gen-step visible" id="gs0">Analysing your industry and pillars</div>
    <div class="gen-step" id="gs1">Building the vision statement</div>
    <div class="gen-step" id="gs2">Mapping touchpoint applications</div>
    <div class="gen-step" id="gs3">Writing pillar expansions</div>
  </div>
</div>

<script>
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// CONFIG â€” update WORKER_URL after deploying Cloudflare Worker
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const WORKER_URL = 'https://cx-vision.renascence.workers.dev';

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// STATE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const S = {
  industry: '', brandName: '', visionType: '', tone: '',
  adjectives: [], customerFeeling: '', freeContext: '', pillarCount: 4
};

let generationCount = 0; // how many times user has generated
let pendingAction = null; // 'download' | 'generate-again'
let capturedEmail = '';

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ADJECTIVES
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ADJS = {
  emotional: ['Caring','Empathetic','Generous','Sincere','Joyful','Warm','Reassuring','Delightful','Celebratory','Compassionate','Inclusive','Trusted'],
  operational: ['Efficient','Reliable','Precise','Consistent','Responsive','Seamless','Transparent','Frictionless','Proactive','Dependable','Agile','Simple'],
  character: ['Bold','Authentic','Courageous','Honest','Ambitious','Grounded','Resilient','Humble','Playful','Serious','Timeless','Unconventional'],
  innovation: ['Innovative','Pioneering','Forward-thinking','Disruptive','Creative','Visionary','Experimental','Intelligent','Dynamic','Modern','Digital-first','Adaptive'],
  experience: ['Memorable','Immersive','Elevated','Intimate','Surprising','Curated','Personal','Refined','Effortless','Sensory','Inviting','Inspiring']
};
const ALL_ADJS = [...new Set(Object.values(ADJS).flat())].sort();
let adjCat = 'all';

function buildAdjPool() {
  const list = adjCat === 'all' ? ALL_ADJS : ADJS[adjCat];
  document.getElementById('adjPool').innerHTML = list.map(a => {
    const sel = S.adjectives.includes(a);
    const dis = !sel && S.adjectives.length >= 5;
    return `<div class="adj-tag${sel?' selected':''}${dis?' disabled':''}" onclick="toggleAdj(this,'${a}')">${a}</div>`;
  }).join('');
}

function filterAdj(el, cat) {
  adjCat = cat;
  document.querySelectorAll('.adj-cat-tab').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
  buildAdjPool();
}

function toggleAdj(el, a) {
  if (el.classList.contains('disabled')) return;
  S.adjectives = S.adjectives.includes(a) ? S.adjectives.filter(x=>x!==a) : [...S.adjectives, a];
  if (S.adjectives.length > 5) { S.adjectives.pop(); return; }
  document.getElementById('adjCount').textContent = S.adjectives.length;
  buildAdjPool();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// SELECTION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function pick(el, key, val) {
  const card = el.closest('.option-card') || el;
  const grid = card.closest('.option-grid') || card.parentElement;
  grid.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
  card.classList.add('selected');
  S[key] = val;
}

function pickTone(el, val) {
  document.querySelectorAll('.tone-card').forEach(c=>c.classList.remove('selected'));
  el.classList.add('selected');
  S.tone = val;
}

// Event delegation - handles all card/tab clicks robustly
document.addEventListener('click', function(e) {
  const card = e.target.closest('[data-pick-key]');
  if (card) {
    const grid = card.closest('.option-grid') || card.parentElement;
    grid.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
    card.classList.add('selected');
    S[card.dataset.pickKey] = card.dataset.pickVal;
    return;
  }
  const tone = e.target.closest('[data-tone]');
  if (tone) {
    document.querySelectorAll('.tone-card').forEach(c => c.classList.remove('selected'));
    tone.classList.add('selected');
    S.tone = tone.dataset.tone;
    return;
  }
  const adjCatEl = e.target.closest('[data-adj-cat]');
  if (adjCatEl) {
    adjCat = adjCatEl.dataset.adjCat;
    document.querySelectorAll('.adj-cat-tab').forEach(t => t.classList.remove('active'));
    adjCatEl.classList.add('active');
    buildAdjPool();
    return;
  }
});

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// NAVIGATION
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function next(step) { if (validate(step)) showStep(step+1); }
function prev(step) { showStep(step-1); }

function showStep(idx) {
  document.querySelectorAll('.form-section').forEach((s,i) => s.classList.toggle('active', i===idx));
  document.querySelectorAll('.step-item').forEach((s,i) => {
    s.classList.toggle('active', i===idx);
    s.classList.toggle('done', i<idx);
  });
  document.getElementById('progressFill').style.width = `${((idx+1)/4)*100}%`;
  if (idx===2) buildAdjPool();
  window.scrollTo({top:0, behavior:'smooth'});
}

function validate(step) {
  const e = document.getElementById(`e${step}`);
  e.classList.remove('visible');
  if (step===0 && !S.industry) { e.classList.add('visible'); return false; }
  if (step===1 && (!S.visionType||!S.tone)) { e.classList.add('visible'); return false; }
  if (step===2 && S.adjectives.length < 3) { e.classList.add('visible'); return false; }
  if (step===3 && !document.getElementById('customerFeeling').value.trim()) { e.classList.add('visible'); return false; }
  return true;
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// EMAIL GATE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showEmailModal(action) {
  pendingAction = action;
  const isDownload = action === 'download';
  document.getElementById('modalIcon').textContent = isDownload ? 'ğŸ“„' : 'âœ¦';
  document.getElementById('modalTitle').textContent = isDownload ? 'Download your vision' : 'Generate again';
  document.getElementById('modalDesc').textContent = isDownload
    ? 'Enter your email to download the PDF. We\'ll also send you a copy â€” useful if you want to share it with your team.'
    : 'Leave your email to generate another version. We use this to improve the tool and occasionally share Renascence insights.';
  document.getElementById('modalCta').textContent = isDownload ? 'ğŸ“„ Download PDF' : 'â†º Generate again';
  document.getElementById('modalEmail').value = capturedEmail;
  document.getElementById('emailError').classList.remove('visible');
  document.getElementById('emailModal').classList.add('visible');
}

function closeModal() {
  document.getElementById('emailModal').classList.remove('visible');
  pendingAction = null;
}

async async function submitEmail() {
  const email = document.getElementById('modalEmail').value.trim();
  if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
    document.getElementById('emailError').classList.add('visible');
    return;
  }
  capturedEmail = email;
  document.getElementById('emailError').classList.remove('visible');
  const action = pendingAction;
  closeModal();

  // Fire-and-forget lead capture â€” never blocks the main action
  fetch(`${WORKER_URL}/lead`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, source: action || 'email_gate' })
  }).catch(() => {});

  if (action === 'download') downloadPDF();
  if (action === 'generate-again') callGenerate();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// GENERATE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function generate() {
  if (!validate(3)) return;
  S.brandName = document.getElementById('brandName').value.trim();
  S.customerFeeling = document.getElementById('customerFeeling').value.trim();
  S.freeContext = document.getElementById('freeContext').value.trim();
  S.pillarCount = parseInt(document.getElementById('pillarCount').value);

  // First generation is free, no email gate
  callGenerate();
}

function regen() {
  if (generationCount === 0) {
    callGenerate();
  } else {
    // Gate subsequent generations behind email
    showEmailModal('generate-again');
  }
}

async function callGenerate() {
  showGenOverlay();
  generationCount++;

  const pillarCount = Math.min(S.adjectives.length, S.pillarCount);
  const pillars = S.adjectives.slice(0, pillarCount);
  const brand = S.brandName ? `The brand is called "${S.brandName}".` : 'The brand name is not specified â€” refer to it as "we" or "the brand".';

  const typeGuide = {
    adjective: 'Pattern: "At [brand], we want every customer experience to be [adj1] to [purpose1], [adj2] to [purpose2]â€¦" â€” each adjective paired with a purposeful "to" clause.',
    feeling: 'Pattern: "We want every customer to feel [feeling1], [feeling2], [feeling3] in every interaction." Focus on internal emotional states.',
    promise: 'Pattern: "In every interaction, we promise to [action1], to [action2], and to [action3]." Active, commitment language.',
    principle: 'Pattern: "We operate by [principle1], [principle2], [principle3]." Each principle is a design decision â€” poetic and specific.'
  };
  const toneGuide = {
    aspirational: 'elevated, forward-looking, emotionally stirring',
    bold: 'declarative, no hedging, confident identity statement',
    human: 'warm, approachable, sounds like a person not a policy',
    precise: 'functional, specific, every word earns its place',
    poetic: 'metaphorical, evocative, creates feeling through language',
    premium: 'restrained, dignified, luxury in every word choice'
  };

  const prompt = `You are a senior CX strategy consultant at Renascence, a consulting firm specialising in experience design from rational, emotional, and behavioural perspectives.

Create a complete CX Vision package for this brief:
BRAND: ${brand}
INDUSTRY: ${S.industry}
VISION TYPE: ${S.visionType} â€” ${typeGuide[S.visionType]}
TONE: ${S.tone} â€” ${toneGuide[S.tone]}
PILLARS: ${pillars.join(', ')}
CUSTOMER FEELING: ${S.customerFeeling}
${S.freeContext ? `CONTEXT: ${S.freeContext}` : ''}

Return ONLY valid JSON with exactly this structure â€” no markdown, no preamble:

{
  "visionStatement": "Complete vision statement (2-4 sentences). Wrap key pillar words in **double asterisks** like **inspiring**.",
  "visionTypeLabel": "e.g. Adjective-Based Vision",
  "pillars": [
    {
      "keyword": "Word",
      "hashtags": "#synonym1 #synonym2 #synonym3",
      "description": "2-3 sentences. Industry-specific and operational â€” not generic."
    }
  ],
  "touchpointApplications": {
    "digital": [
      {"icon": "emoji", "name": "Touchpoint", "how": "Specific, actionable sentence."},
      {"icon": "emoji", "name": "Touchpoint", "how": "Specific sentence."}
    ],
    "human": [
      {"icon": "emoji", "name": "Touchpoint", "how": "Specific sentence."},
      {"icon": "emoji", "name": "Touchpoint", "how": "Specific sentence."}
    ],
    "physical": [
      {"icon": "emoji", "name": "Touchpoint", "how": "Specific sentence."},
      {"icon": "emoji", "name": "Touchpoint", "how": "Specific sentence."}
    ]
  },
  "applicationScenarios": [
    {"title": "Named scenario", "description": "2-3 sentences. Industry-specific and real."},
    {"title": "Named scenario", "description": "2-3 sentences."},
    {"title": "Named scenario", "description": "2-3 sentences."}
  ],
  "visionVariants": [
    {"type": "For employees", "text": "Internal version â€” practical and motivating."},
    {"type": "For leadership", "text": "Strategic framing for exec/board communication."},
    {"type": "For customers", "text": "Customer-facing promise â€” warm, direct, brand voice."}
  ],
  "implementationNote": "One paragraph on what operational moves, cultural shifts, or behavioural changes make this real rather than decorative."
}

Rules: wrap pillar words in **markers** Â· all descriptions must be industry-specific Â· no filler phrases like "at the heart of" Â· maintain the tone throughout Â· return ONLY JSON.`;

  try {
    const res = await fetch(`${WORKER_URL}/generate`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        prompt,
        isSecondUse: generationCount > 1,
        email: capturedEmail
      })
    });

    const data = await res.json();

    if (!res.ok) {
      throw new Error(data.message || 'API error');
    }

    const rawText = data.data.content.map(b => b.text || '').join('');
    const clean = rawText.replace(/```json|```/g, '').trim();
    const vision = JSON.parse(clean);
    renderOutput(vision);
  } catch (err) {
    hideGenOverlay();
    alert(`Could not generate vision: ${err.message}\n\nIf this persists, the Cloudflare Worker URL may need updating.`);
  }
}

// â”€â”€ Generating overlay animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let genTimer = null;
function showGenOverlay() {
  document.getElementById('genOverlay').classList.add('visible');
  const steps = ['gs0','gs1','gs2','gs3'];
  let i = 0;
  steps.forEach(id => document.getElementById(id).classList.remove('visible'));
  document.getElementById('gs0').classList.add('visible');
  genTimer = setInterval(() => {
    i = Math.min(i + 1, steps.length - 1);
    steps.forEach(id => document.getElementById(id).classList.remove('visible'));
    document.getElementById(steps[i]).classList.add('visible');
  }, 7000);
}
function hideGenOverlay() {
  clearInterval(genTimer);
  document.getElementById('genOverlay').classList.remove('visible');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// RENDER OUTPUT
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentVision = null;

function renderOutput(vision) {
  hideGenOverlay();
  currentVision = vision;

  const hl = txt => txt.replace(/\*\*([^*]+)\*\*/g, '<span class="vision-kw">$1</span>');
  const brand = S.brandName || 'Your Brand';

  const pillarsHTML = vision.pillars.map(p => `
    <div class="pillar-card">
      <div class="pillar-kw">${p.keyword}</div>
      <div class="pillar-tags">${p.hashtags}</div>
      <div class="pillar-desc">${p.description}</div>
    </div>`).join('');

  const tpColHTML = (items, label) => `
    <div class="tp-col">
      <div class="tp-col-title">${label}</div>
      ${items.map(t => `<div class="tp-item"><div class="tp-icon">${t.icon}</div><div><div class="tp-name">${t.name}</div><div class="tp-how">${t.how}</div></div></div>`).join('')}
    </div>`;

  const scenariosHTML = vision.applicationScenarios.map((s,i) => `
    <div class="scenario-item">
      <div class="scenario-num">${i+1}</div>
      <div class="scenario-content"><h4>${s.title}</h4><p>${s.description}</p></div>
    </div>`).join('');

  const variantsHTML = vision.visionVariants.map(v => `
    <div class="variant-row">
      <div class="variant-type">${v.type}</div>
      <div class="variant-text">${v.text}</div>
    </div>`).join('');

  document.getElementById('outputContent').innerHTML = `
    <div class="vision-block">
      <div class="vision-type-badge">${vision.visionTypeLabel}</div>
      <span class="vision-quote">"</span>
      <div class="vision-text">${hl(vision.visionStatement)}</div>
    </div>

    <div class="blk-h">Vision Pillars</div>
    <div class="blk-s">Each pillar is a design decision â€” a filter for every interaction, policy, and hire.</div>
    <div class="pillars-grid">${pillarsHTML}</div>

    <div class="tp-block">
      <div class="blk-h" style="margin-bottom:4px">Touchpoint Applications</div>
      <div class="blk-s">How each pillar shows up across your experience ecosystem.</div>
      <div class="tp-grid">
        ${tpColHTML(vision.touchpointApplications.digital,'ğŸ–¥ Digital')}
        ${tpColHTML(vision.touchpointApplications.human,'ğŸ¤ Human')}
        ${tpColHTML(vision.touchpointApplications.physical,'ğŸ¢ Physical')}
      </div>
    </div>

    <div class="scenarios-block">
      <div class="blk-h" style="margin-bottom:4px">Real-World Scenarios</div>
      <div class="blk-s" style="margin-bottom:14px">How this vision plays out in specific, named situations.</div>
      ${scenariosHTML}
    </div>

    <div class="variants-block">
      <div class="blk-h" style="margin-bottom:4px">Vision by Audience</div>
      <div class="blk-s" style="margin-bottom:14px">The same vision, reframed for different rooms.</div>
      ${variantsHTML}
    </div>

    <div class="impl-block">
      <div class="impl-title">Implementation Note</div>
      <div class="impl-text">${vision.implementationNote}</div>
    </div>

    <div class="download-cta">
      <div class="download-cta-text">
        <h3>Download your CX Vision</h3>
        <p>Get a clean PDF of your complete vision package â€” ready to present, share, or workshop with your team.</p>
      </div>
      <button class="btn btn-primary" onclick="handleDownload()">ğŸ“„ Download PDF</button>
    </div>
  `;

  document.getElementById('outputSection').classList.add('visible');
  document.getElementById('stepsBar').style.display = 'none';
  document.getElementById('progressFill').parentElement.style.display = 'none';
  document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
  window.scrollTo({top:0, behavior:'smooth'});
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// DOWNLOAD PDF (print-based, email gated)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function handleDownload() {
  if (!capturedEmail) {
    showEmailModal('download');
  } else {
    downloadPDF();
  }
}

function downloadPDF() {
  // Open in new tab for clean print/save â€” works reliably from iframe context
  const w = window.open('', '_blank');
  if (!w) { window.print(); return; }
  const doc = document.documentElement.outerHTML;
  w.document.open();
  w.document.write(doc);
  w.document.close();
  w.addEventListener('load', function() {
    setTimeout(function() { w.print(); }, 500);
  });
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// UTILITIES
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startOver() {
  Object.assign(S, { industry:'', brandName:'', visionType:'', tone:'', adjectives:[], customerFeeling:'', freeContext:'', pillarCount:4 });
  generationCount = 0;
  document.getElementById('outputSection').classList.remove('visible');
  document.getElementById('stepsBar').style.display = 'flex';
  document.getElementById('progressFill').parentElement.style.display = 'block';
  document.querySelectorAll('.option-card,.tone-card').forEach(c=>c.classList.remove('selected'));
  ['brandName','customerFeeling','freeContext'].forEach(id => document.getElementById(id).value='');
  document.getElementById('adjCount').textContent = '0';
  showStep(0);
}

buildAdjPool();
</script>

<!-- Print styles for PDF download -->
<style media="print">
  .hero-badge,.steps-bar,.progress-wrap,.form-section,.regen-bar,.download-cta,.footer,.gen-overlay,.modal-overlay { display:none!important; }
  .output-section { display:block!important; }
  body { background:white; }
  .main { padding:20px; max-width:100%; }
  .vision-block,.tp-block,.scenarios-block,.variants-block,.impl-block { break-inside:avoid; }
  .pillars-grid { grid-template-columns:repeat(3,1fr); }
</style>

<script>
function reportHeight() {
  const h = document.documentElement.scrollHeight;
  window.parent.postMessage({ type: 'iframeHeight', height: h }, '*');
}
// Report on load, after any DOM change, and on a short interval for dynamic content
window.addEventListener('load', reportHeight);
new MutationObserver(reportHeight).observe(document.body, { childList: true, subtree: true });
setInterval(reportHeight, 300);
</script>
</body>
</html>
